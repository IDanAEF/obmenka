!function(){"use strict";var e=()=>{try{function e(){document.querySelector("body").classList.remove("fixed"),document.querySelector("html").classList.remove("fixed")}function t(){document.querySelector(".modal").classList.remove("active"),document.querySelectorAll(".modal__item").forEach((e=>e.classList.remove("active")))}function a(e){const t=document.querySelector(e);t.classList.add("active"),t.parentElement.classList.add("active"),document.querySelector("body").classList.add("fixed"),document.querySelector("html").classList.add("fixed")}function n(e){let t=0;for(let a=0;a<e.length;a++)t+=+e.substring(a,a+1);let a=[0,1,2,3,4,-4,-3,-2,-1,0];for(let n=e.length-1;n>=0;n-=2)t+=a[+e.substring(n,n+1)];let n=t%10;return n=10-n,10==n&&(n=0),n}function s(e){let t=+(e=e.replace(/\s/g,"")).substring(e.length-1,e.length);return n(e.substring(0,e.length-1))==+t}function r(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return;let a=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([.$?*|{}()\[\]\\\/+^])/g,"\\$1")+"=([^;]*)"));if(a){let e=decodeURIComponent(a[1]);if(t)try{return JSON.parse(e)}catch(e){}return e}}function c(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{path:"/"};if(!e)return;a=a||{},a.expires instanceof Date&&(a.expires=a.expires.toUTCString()),t instanceof Object&&(t=JSON.stringify(t));let n=encodeURIComponent(e)+"="+encodeURIComponent(t);for(let e in a){n+="; "+e;let t=a[e];!0!==t&&(n+="="+t)}document.cookie=n}function i(e){c(e,null,{expires:new Date,path:"/"})}function l(e,t){let a=document.querySelector(`input[name="${t}"]`);var n,s,r;a.value=(n=e.value,s=e.getAttribute("data-rubs"),r=a.getAttribute("data-rubs"),n||(n=0),((s=+s.replace(",",".")*n)/(r=+r.replace(",","."))).toFixed(2)),e.value||(a.value="");let c=e.getAttribute("data-min")?e:a.getAttribute("data-min")?a:"",i=c?+c.getAttribute("data-min"):"";i&&+c.value<i?(c.classList.add("invalid"),c.nextElementSibling.textContent="Мин. сумма: "+i):i&&(c.classList.remove("invalid"),c.nextElementSibling.textContent="")}async function o(e){let t=await fetch(e,{method:"GET"});return await t.text()}async function u(e,t){let a=await fetch(e,{method:"POST",body:t});return await a.text()}function d(){i("order-post-id"),i("step"),i("status"),i("get-curr"),i("send-curr"),i("get-bank"),i("send-bank")}const m=document.querySelector(".change-form-cont");let g=[],v='\n                <div class="main-loading loading-anim">\n                    <img src="/wp-content/themes/obmenka/assets/images/load1.png" alt="">\n                    <img src="/wp-content/themes/obmenka/assets/images/load2.png" alt="">\n                    <img src="/wp-content/themes/obmenka/assets/images/load3.png" alt="">\n                    <img src="/wp-content/themes/obmenka/assets/images/load4.png" alt="">\n                </div>';function p(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t(),e&&(m.innerHTML+=v),o(m.getAttribute("data-url")+"?action=form_steps").then((e=>{m.innerHTML=e,2==r("step")&&"send-money"==r("status")&&(b(),console.log()),3==r("step")&&setTimeout((()=>{d()}),2e3),a&&L()}))}function h(){m.innerHTML+=v,o(m.getAttribute("data-url")+"?action=delete_order&post_id="+r("order-post-id")).then((()=>{d(),p(!1)}))}function y(){let e=setInterval((()=>{o(m.getAttribute("data-url")+"?action=check_status&post_id="+r("order-post-id")).then((t=>{(t=JSON.parse(t))&&(c("step",3,{path:"/",expires:7200}),c("status",t,{path:"/",expires:7200}),clearInterval(e),p())}))}),1e4)}function f(){let e="?action=create_order";g.forEach((t=>{e+="&"+t.name+"="+t.value})),m.innerHTML+=v,o(m.getAttribute("data-url")+e).then((e=>{c("order-post-id",e,{path:"/",expires:7200}),c("step",2,{path:"/",expires:7200}),c("status","check-info",{path:"/",expires:7200}),p(!1,!0)}))}function b(){const e=new Date(1e3*+document.querySelector("[data-date-out]").getAttribute("data-date-out")),t=document.querySelector("#timer-minutes"),a=document.querySelector("#timer-seconds");let n=null;function s(){const s=e-new Date;s<=0&&(clearInterval(n),h());let r=s>0?Math.floor(s/1e3/60)%60:0,c=s>0?Math.floor(s/1e3)%60:0;t.textContent=r<10?"0"+r:r,a.textContent=c<10?"0"+c:c}s(),n=setInterval(s,1e3)}function L(){let e,t=9e4,a=1e3*+document.querySelector(".timer-container").getAttribute("data-time-count");const n=document.querySelector(".timer-container .progress-ring .progress-ring-circle"),s=document.querySelector("#timer-circle-seconds"),r=e=>{const a=1602*(1-e/t);n.style.strokeDashoffset=a},i=e=>{const t=(e=>{let t=Math.floor(e/1e3);return t=t<10?"0"+t:t,`${t}`})(e);s.innerText=t,r(e)};r(a),e=setInterval((()=>{a-=1e3,i(a),a<=5e3&&(n.style.stroke="#D91C1C"),a<1e3&&(c("status","send-money",{path:"/",expires:7200}),p(),clearInterval(e),a=t,i(t))}),1e3)}p(!0,!0);const S=document.querySelector(".modal__check label");S.addEventListener("click",(e=>{S.querySelector(".checkbox").classList.remove("invalid"),S.classList.toggle("active")})),2==r("step")&&"get-money"==r("status")&&y(),3==r("step")&&setTimeout((()=>{d()}),2e3),window.addEventListener("keyup",(e=>{var t;e.target.classList.contains("only-number")&&(e.target.value=e.target.value.replace(/\D/g,"")),"send-sum"==e.target.getAttribute("name")&&l(e.target,"get-sum"),"get-sum"==e.target.getAttribute("name")&&l(e.target,"send-sum"),e.target.classList.contains("card-validate")&&(s(t=e.target.value)&&t.replace(/\s/g,"").length>=13?(e.target.closest(".cards-item").querySelector(".cards-invalid").textContent="",e.target.classList.remove("invalid")):(e.target.closest(".cards-item").querySelector(".cards-invalid").textContent="Проверьте номер карты",e.target.classList.add("invalid")))})),document.body.addEventListener("click",(n=>{if(n.target.classList.contains("invalid")||n.target.closest(".invalid")){let e=n.target.classList.contains("invalid")?n.target:n.target.closest(".invalid");e.classList.contains("not-click")||e.classList.remove("invalid")}if(n.target.classList.contains("back")&&(e(),t()),n.target.classList.contains("list_items-val")){let e=n.target.closest(".list_target");e.classList.contains("target-currs")&&setTimeout((()=>{let t={"send-curr":document.querySelector('input[name="send-curr"]').value,"get-curr":document.querySelector('input[name="get-curr"]').value};t["send-curr"]==t["get-curr"]&&e.getAttribute("data-revert")?(t[e.getAttribute("data-revert")]=e.getAttribute("data-old"),c("send-bank",document.querySelector('input[name="get-bank"]')?document.querySelector('input[name="get-bank"]').value:"",{path:"/",expires:7200}),c("get-bank",document.querySelector('input[name="send-bank"]')?document.querySelector('input[name="send-bank"]').value:"",{path:"/",expires:7200})):(i("get-bank"),i("send-bank")),c("send-curr",t["send-curr"],{path:"/",expires:7200}),c("get-curr",t["get-curr"],{path:"/",expires:7200}),p()}),500),e.classList.contains("target-banks")&&setTimeout((()=>{c("send-bank",document.querySelector('input[name="send-bank"]').value,{path:"/",expires:7200}),c("get-bank",document.querySelector('input[name="get-bank"]').value,{path:"/",expires:7200}),p()}),500)}if(n.target.classList.contains("delete-order")&&h(),n.target.classList.contains("continue")&&(document.querySelector("#privacy").checked?(e(),t(),f()):S.querySelector(".checkbox").classList.add("invalid")),n.target.classList.contains("continue-pay")){e(),t(),c("status","get-money",{path:"/",expires:7200});const a=new FormData;a.append("post-type","pers-pay"),a.append("addr",document.querySelector("[data-e-addr]").getAttribute("data-e-addr")),a.append("order-id",r("order-post-id")),u(document.querySelector("[data-e-addr]").getAttribute("data-mail"),a).then((e=>{console.log(e)})),y(),p()}if(n.target.classList.contains("pay-done")&&a("#pay-done"),n.target.classList.contains("window")&&a("#instruction"),n.target.classList.contains("main__form-change-button")){const e=m.querySelector('input[name="send-bank"]'),t=m.querySelector('input[name="get-bank"]'),n=m.querySelector('input[name="send-sum"]'),r=m.querySelector('input[name="get-sum"]'),c=m.querySelector('input[name="contacts"]'),i=m.querySelector('input[name="send-email"]'),l=m.querySelector('input[name="send-card"]'),o=m.querySelector('input[name="get-card"]'),u=m.querySelector('input[name="send-curr"]'),d=m.querySelector('input[name="get-curr"]');let v=!0,p=[e,t];[n,l,o,i].forEach((e=>{!e||e.value&&!e.classList.contains("invalid")||(e.classList.add("invalid"),v=!1)})),p.forEach((e=>{e&&!e.value&&(e.closest(".field").classList.add("invalid"),v=!1)})),s=i.value,new RegExp(/^[a-zA-Z0-9][\-_\.\+\!\#\$\%\&\'\*\/\=\?\^\`\{\|]{0,1}([a-zA-Z0-9][\-_\.\+\!\#\$\%\&\'\*\/\=\?\^\`\{\|]{0,1})*[a-zA-Z0-9]@[a-zA-Z0-9][-\.]{0,1}([a-zA-Z][-\.]{0,1})*[a-zA-Z0-9]\.[a-zA-Z0-9]{1,}([\.\-]{0,1}[a-zA-Z]){0,}[a-zA-Z0-9]{0,}$/i).test(s)||(i.classList.add("invalid"),v=!1),v&&(a("#how-work"),g=[],g.push({name:"send-bank",value:e?e.value:""}),g.push({name:"get-bank",value:t?t.value:""}),g.push({name:"send-sum",value:n.value}),g.push({name:"send-email",value:i.value}),g.push({name:"get-sum",value:r.value}),g.push({name:"contacts",value:c.value}),g.push({name:"conttype",value:c.type}),g.push({name:"send-card",value:l.value}),g.push({name:"get-card",value:o.value}),g.push({name:"send-curr",value:u.value}),g.push({name:"get-curr",value:d.value}))}var s}))}catch(q){console.log(q.stack)}};window.addEventListener("DOMContentLoaded",(()=>{(()=>{let e=(e,t)=>{if(t.focus(),t.setSelectionRange)t.setSelectionRange(e,e);else if(t.createTextRange){let a=t.createTextRange();a.collapse(!0),a.moveEnd("character",e),a.moveStart("character",e),a.select()}};function t(t){t.target.getAttribute("data-mask")&&("tel"==t.target.getAttribute("type")||"text"==t.target.getAttribute("type")&&t.target.classList.contains("card-validate"))&&function(t){const a=t.target;let n=a.getAttribute("data-mask"),s=0,r=n.replace(/\D/g,""),c=a.value.replace(/\D/g,"");r.length>=c.length&&(c=r),a.value=n.replace(/./g,(function(e){return/[_\d]/.test(e)&&s<c.length?c.charAt(s++):s>=c.length?"":e})),"blur"===t.type?2==a.value.length&&(a.value=""):e(a.value.length,a)}(t)}document.body.addEventListener("input",t),document.body.addEventListener("focus",t),document.body.addEventListener("blur",t)})(),function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(e){const t=document.querySelector(e);window.addEventListener("scroll",(()=>{document.documentElement.scrollTop>1650?(t.classList.add("animated","fadeIn"),t.classList.remove("fadeOut")):(t.classList.add("fadeOut"),t.classList.remove("fadeIn"))}))}let t=document.querySelectorAll('[href^="#"]'),a=.3;t.forEach((e=>{e.addEventListener("click",(function(e){e.preventDefault();let t=document.documentElement.scrollTop,n=this.hash;if(document.querySelector(n)){let s=document.querySelector(n).getBoundingClientRect().top,r=null;function c(e){null===r&&(r=e);let i=e-r,l=s<0?Math.max(t-i/a,t+s):Math.min(t+i/a,t+s);document.documentElement.scrollTo(0,l),l!=t+s?requestAnimationFrame(c):location.hash=n}requestAnimationFrame(c)}else e.target.getAttribute("data-url")&&(window.location.href=e.target.getAttribute("data-url"))}))}))}(),(()=>{try{const e=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;e.forEach((e=>e.classList.remove("active"))),e[a].classList.add("active"),t&&(t.forEach((e=>e.classList.remove("active"))),t[a].classList.add("active"))};document.querySelectorAll(".slider-default").forEach((t=>{const a=t.querySelectorAll(".slider-item"),n=t.querySelector(".slider-points");let s=[];n&&a.forEach((e=>{const t=document.createElement("span");n.append(t),s.push(t)})),e(a,s);let r=a.length-1,c=0;setInterval((()=>{c==r?c=0:c++,e(a,s,c)}),7e3),s.forEach(((t,n)=>{t.addEventListener("click",(()=>{e(a,s,n),c=n}))}))}))}catch(e){console.log(e.stack)}})(),document.querySelector("#change-form")&&e(),document.querySelector("#abroad-form")&&(()=>{try{function e(e){const t=document.querySelector(e);t.classList.add("active"),t.parentElement.classList.add("active"),document.querySelector("body").classList.add("fixed"),document.querySelector("html").classList.add("fixed")}async function t(e,t){let a=await fetch(e,{method:"POST",body:t});return await a.text()}const a=document.querySelector("#abroad-form form"),n=a.querySelectorAll(".input input");a.addEventListener("submit",(s=>{s.preventDefault();let r=!0;if(n.forEach((e=>{e.value||(e.classList.add("invalid"),r=!1)})),r){const n=new FormData(a);n.append("post-type","abroad"),t(a.action,n).then((()=>{e("#feedsend")}))}})),document.body.addEventListener("click",(e=>{e.target.classList.contains("invalid")&&e.target.classList.remove("invalid"),e.target.classList.contains("back")&&(document.querySelector("body").classList.remove("fixed"),document.querySelector("html").classList.remove("fixed"),document.querySelector(".modal").classList.remove("active"),document.querySelectorAll(".modal__item").forEach((e=>e.classList.remove("active"))))}))}catch(s){console.log(s.stack)}})(),(()=>{try{document.body.addEventListener("click",(e=>{if(e.target.closest(".list_target")||e.target.classList.contains("list_target")?(e.target.classList.contains("list_target")?e.target:e.target.closest(".list_target")).classList.toggle("active"):document.querySelectorAll(".list_target").forEach((e=>e.classList.remove("active"))),e.target.classList.contains("list_items-val")){const t=e.target.closest(".list_target"),a=t.querySelector(".list_input");t.classList.contains("input-change")?(a.value="",a.placeholder=e.target.getAttribute("data-value").trim(),a.type=e.target.getAttribute("data-type").trim(),e.target.getAttribute("data-mask")&&a.setAttribute("data-mask",e.target.getAttribute("data-mask").trim())):(t.setAttribute("data-old",a.value),a.value=e.target.getAttribute("data-value").trim(),t.querySelector(".list_text").innerHTML=e.target.getAttribute("data-value").trim()),e.target.getAttribute("data-img")&&(t.querySelector(".list_img").src=e.target.getAttribute("data-img")),t.querySelectorAll(".list_items-val").forEach((e=>e.style.display="")),e.target.style.display="none"}e.target.classList.contains("list_open_btn")&&(e.target.classList.toggle("active"),e.target.nextElementSibling.classList.toggle("active"))}))}catch(e){console.log(e.stack)}})(),(()=>{try{const e=document.querySelector(".header__hamburger"),t=document.querySelector(".header__nav");document.body.addEventListener("click",(a=>{a.target==e&&(e.classList.toggle("active"),t.classList.toggle("active")),a.target==e||a.target.closest("header__nav")||a.target==t||(e.classList.remove("active"),t.classList.remove("active"))}))}catch(e){console.log(e.stack)}try{const e=document.querySelector(".slide-field.on-scroll"),t=e.querySelector(".slide-elem");let a;const n=()=>{a=e.getBoundingClientRect().y+window.pageYOffset,window.screen.width>=992&&window.pageYOffset>=a&&window.pageYOffset+window.screen.height<=a+e.clientHeight?t.style.cssText=`transform: translateY(${window.pageYOffset-a}px)`:window.screen.width<992&&(t.style.cssText="transform: translateY(0px)")};n(),e&&window.addEventListener("scroll",n)}catch(e){console.log(e.stack)}})()}))}();